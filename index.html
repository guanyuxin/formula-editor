<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css">
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="geek.js"></script>
    <link href="geek.css" type="text/css" rel="stylesheet">
    <style>
        .btn{
            text-align:center;
            display:inline-block;
            width:100px;
            height:20px;
            border:2px solid gray;
            cursor:hand;
            margin:3px;
            font-weight:bold;
        }
        .btn:hover{
            background-color:yellow;
        }
        .Suggestion{
            border:1px solid black;
            background:white;
            position:absolute;
        }
    </style>
    <title>Formula-editor</title>
  </head>

  <body>

            <style>v\: * { behavior:url(#default#VML);display:inline-block }</style>
            <xml:namespace ns="urn:schemas-microsoft-com:vml" prefix="v" />
            <div id="buttons">
                <span class="btn" >fraction</span>
                <span class="btn" >corner</span>
                <span class="btn" >radical</span>
                <span class="btn" >bracket</span>
            </div>
            <div id="EXP" class="editing">
            </div>
            <div type="text" contenteditable="true" style="width:0;height:0;outline:0" id="AGENT"></div>
            <div class="Suggestion">
            </div>
            <div id="TEST"  class="editing">
            </div>

  </body>
</html>
<script>

    var module=
    {type:2,children:[
        {type:1,children:[
            "x",
            {type:5,
                lower:"1"
            },
            " = ",
            {type:3,
                upper:{type:1,children:[
                    "- b + ",
                    {type:4,
                        base:{type:1,children:[
                            {type:0,value:"b"},
                            {type:5,
                                upper:"2"
                            },
                            " - 4ac"
                        ]},
                        exponent:"2"
                    }
                ]},
                lower:"2a"
            }
        ]},
        {type:1,children:[
            "x",
            {type:5,
                lower:"2"
            },
            " = ",
            {type:3,
                upper:{type:1,children:[
                    "- b - ",
                    {type:4,
                        base:{type:1,children:[
                            {type:0,value:"b"},
                            {type:5,
                                upper:"2"
                            },
                            " - 4ac"
                        ]},
                        exponent:"2"
                    }
                ]},
                lower:"2a"
            }
        ]}
    ]};
    window.formula=new Fomula($("#EXP"),module);
    formula.refresh();
    $(".btn").mousedown(function(e){
        var a=formula.focusExp;
        console.log(a);
        a.insert(this.innerHTML);
        e.preventDefault();
    })
</script>